<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
  <head>
    <title>Sassij Tests</title>    
    <script language="javascript" src="../../jquery-1.3.1.min.js" type="text/javascript"></script>
    <script language="javascript" src="../../testrunner.js" type="text/javascript"></script>
    <script language="javascript" src="../../testnavigation.js" type="text/javascript"></script>
    <link media="screen" href="../../testsuite.css" type="text/css" rel="stylesheet"/>    

    <script language="javascript" src="../../../lib/sassij.js" type="text/javascript"></script>
    <script language="javascript" src="../../../lib/shared.js" type="text/javascript"></script>
    <script language="javascript" src="../../../lib/string-scanner.js" type="text/javascript"></script>
    <script language="javascript" src="../../../lib/sassij/tree/node.js" type="text/javascript"></script>
  </head>
  <body>
    <script language="javascript" type="text/javascript">

  // Some of these tests are adapted from haml/tests/sass/script_test.rb
  module( "Tree Node Tests" );
  
  beforeEach = function(){
    testNode = new SassijTreeNode();
    childNode = new SassijTreeNode();
    childNode1 = new SassijTreeNode();
    childNode2 = new SassijTreeNode();
    childNode3 = new SassijTreeNode();
    threeNewChildren = [ childNode1, childNode2, childNode3 ];
  }
  
/*
  This is ruby-style String evaluation, so we'll come back to this.
  def test_interpolation
    assert_equal "foo bar baz bang", resolve('"foo #{"#{"ba" + "r"} baz"} bang"')
    assert_equal 'foo #{bar baz} bang', resolve('"foo \#{#{"ba" + "r"} baz} bang"')
    assert_equal 'foo #{baz bang', resolve('"foo #{"\#{" + "baz"} bang"')
  end

  def test_rule_interpolation
    assert_equal(<<CSS, render(<<SASS))
foo bar baz bang {
  a: b; }
CSS
foo \#{"\#{"ba" + "r"} baz"} bang
  a: b
SASS
    assert_equal(<<CSS, render(<<SASS))
foo \#{bar baz} bang {
  a: b; }
CSS
foo \\\#{\#{"ba" + "r"} baz} bang
  a: b
SASS
    assert_equal(<<CSS, render(<<SASS))
foo \#{baz bang {
  a: b; }
CSS
foo \#{"\\\#{" + "baz"} bang
  a: b
SASS
  end
*/

  test( "SassijTreeNode should be able to accept a new child", function(){
    beforeEach();
    testNode.addChild( childNode );
    equals( testNode.getChildren()[0], childNode );
  });

  test( "SassijTreeNode should be able to mass-assign new children", function(){
    beforeEach();
    testNode.setChildren( threeNewChildren );
    equals( testNode.getChildren(), threeNewChildren );
  });

  test( "SassijTreeNode should be able to return just the last child", function(){
    beforeEach();
    testNode.setChildren( threeNewChildren );
    equals( testNode.lastChild(), threeNewChildren[2] );
  });

  
    </script>

    <h1>Tree Node Tests</h1>
    <h2 id="banner">
      <select id='test_select'></select>
    </h2>
    <ol id="tests"></ol>
    <div id="results"></div>
    <div id="main"></div>        

  </body>
</html>
